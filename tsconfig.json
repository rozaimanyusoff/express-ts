{
  "compilerOptions": {
    // ── Output ────────────────────────────────────────────────────────────────
    "target": "ES2022", // Node.js 22 supports ES2022 natively
    "module": "ES2022", // Emit ES module syntax (matches "type":"module" in package.json)
    "lib": ["ES2022"], // Explicit runtime library — no DOM APIs in Node.js

    // ── Module Resolution ──────────────────────────────────────────────────────
    "moduleResolution": "bundler", // Allows extensionless imports; postbuild script injects .js extensions
    "esModuleInterop": true, // Interop between CJS (e.g. bcrypt) and ESM
    "allowSyntheticDefaultImports": true, // Implied by esModuleInterop; kept for clarity
    "resolveJsonModule": true, // Allow: import config from './config.json'

    // ── Emit ──────────────────────────────────────────────────────────────────
    "outDir": "./dist",
    "rootDir": "./src",
    "sourceMap": true, // Emit .map files — required for meaningful stack traces in production
    "noEmitOnError": true, // Never emit broken JS when type errors exist
    "declaration": false, // No .d.ts files needed (not a library)

    // ── Strict Type Safety ────────────────────────────────────────────────────
    "strict": true, // Enables: noImplicitAny, strictNullChecks, strictFunctionTypes, etc.
    // noImplicitReturns: reveals 159 real issues across controllers (mixed return paths)
    //   Root cause: controllers use `return res.json()` in early exits but no explicit
    //   return type. Fix by adding `: Promise<void>` to all async controller signatures.
    //   Enable this flag once controllers are annotated.
    "noFallthroughCasesInSwitch": true, // Prevent accidental switch case fall-through bugs
    // noUnusedLocals / noUnusedParameters: delegated to ESLint (@typescript-eslint/no-unused-vars)
    //   ESLint supports '_' prefix convention to suppress intentional unused params (e.g. req in Express).
    "isolatedModules": true, // Matches tsx compile model; catches const enum / ambient module pitfalls

    // ── Interop / Compatibility ───────────────────────────────────────────────
    "forceConsistentCasingInFileNames": true, // Prevents cross-platform import casing bugs
    "skipLibCheck": true // Skip .d.ts checking; speeds up build, avoids upstream type conflicts
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "scripts"]
}
